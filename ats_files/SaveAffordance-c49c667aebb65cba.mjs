(self.modernJsonp=self.modernJsonp||[]).push([["64701"],{358276:function(e,n,o){o.r(n),o.d(n,{default:()=>T});var a=o(281098),t=o(667294),i=o(581722),l=o(20256),r=o(890479),s=o(374114),d=o(111330),c=o(355940),u=o(937392),p=o(19585),v=o(956077),m=o(821806),h=o(753143),S=o(572227),f=o(341742),x=o(923924),P=o(542963),k=o(441733),y=o(966838),_=o(373950),B=o(78762),Z=o(785893);let g=(0,B.Z)(()=>o.e("32560").then(o.bind(o,817631)),void 0,e=>817631,"PinSaveButtonCommon",e=>["32560"]),w=(0,t.lazy)(async()=>({default:(await Promise.all([o.e("86934"),o.e("24660")]).then(o.bind(o,418581))).QuickSaveButtonWithExperienceAnchor})),T=({boardCount:e=0,clientTrackingParams:n,onBoardSelectionFlyoutChange:o,onClickCallback:B,pin:T,showEnabledSaveBehavior:b,showRepinOnInitialRender:C,variant:A,viewParameter:j,viewType:I,saveToBoardFromPostDownloadUpsell:D,setSaveToBoardFromPostDownloadUpsell:Q})=>{(0,t.useEffect)(()=>{(0,a.Z)("SaveAffordance","/app/common/react/components/closeup/CloseupBody/SaveAffordance.tsx")},[]);let{experience:U}=(0,u.Ow)(1000310),{experience:E}=(0,u.Ow)(12),F=(0,S.Z)(),M=(0,i.I0)(),R=(0,p.ZP)(),K=(0,t.useRef)(!1),{pins:L,clear:O}=(0,P.Z)(),N=(0,h.M0)().getItem(d.M8)||"",z=N?N===T.id:!!L&&L.length>0&&L[L.length-1].id===T.id,{shouldSeePinBetterSave:J}=(0,k.Z)();(0,f.Z)(()=>{K.current||2!==L.length&&(1!==L.length||z)||(K.current=!0,(2===L.length&&!N&&z?[L[0]]:L).forEach(({id:e,nodeId:n})=>{(0,s.Z)({description:"",entityId:e,link:"",promotedIsRemovable:void 0,title:""},R).then(o=>{let{id:a,url:t,name:i}=o;M((0,y.d)({boardId:a,url:t,title:i||"",pinId:e||"",nodeId:n}))})}),z||O())});let W=()=>{(0,h.M0)().removeItem(d.M8),O(),F({action:"trigger",item:"unauth-save-button-quicksave"}),M((0,_.Z)(!0)),M((0,y.d)({boardId:"",url:"",title:"Profile",pinId:T.id,nodeId:T?.node_id})),M((0,y.X)(T))},q=()=>{(0,v.Nx)("button")};if((T?.pinner?.blocked_by_me||T?.promoted_is_removable)&&(0,v.Nx)("button"),!J&&U&&502450===U.experience_id)return(0,Z.jsx)(c.Z,{name:"SafeSuspense_SaveAffordance_QuickSaveButton",children:(0,Z.jsx)(m.Z,{children:(0,Z.jsx)(r.Z,{id:"QuickSaveButtonWithExperienceAnchor",children:(0,Z.jsx)(w,{autoQuicksaveCallback:W,clientTrackingParams:n,experience:U,onClickCallback:B,onMount:q,pinKey:{type:"Legacy",data:T},saveToBoardFromPostDownloadUpsell:D,setSaveToBoardFromPostDownloadUpsell:Q,shouldAutoQuicksave:z,showEnabledSaveBehavior:b,viewParameter:j})})})});let H=!T.content_sensitivity?.is_sensitive_content&&void 0!==e||J,V=[501041],X=E&&501041===E.experience_id&&E.display_data.has_tooltip?e=>(0,Z.jsx)(u.Qp,{anchor:e,experienceIds:V,idealDirection:"down",placementId:12,positionRelativeToAnchor:!0,showCaret:!0}):e=>(0,Z.jsx)(u.N,{anchors:{3010:e},idealDirection:"down",onAnchorTouch:"complete",placementId:12,scrollToDismiss:!0});return H?(0,Z.jsx)(l.xu,{children:(0,Z.jsx)(c.Z,{name:"SafeSuspense_SaveAffordance_PinBetterSave",children:(0,Z.jsx)(r.Z,{id:"PinBetterSave",children:(0,Z.jsx)(x.default,{autoQuicksaveCallback:W,clientTrackingParams:n,onClickCallback:B,onMount:q,onToggleFlyout:o,pinKey:{type:"Legacy",data:T},renderPinSaveTooltip:X,saveToBoardFromPostDownloadUpsell:D,setSaveToBoardFromPostDownloadUpsell:Q,shouldAutoQuicksave:z,variant:A,viewParameter:j,viewType:I})})})}):(0,Z.jsx)(c.Z,{name:"SafeSuspense_SaveAffordance_PinSaveButton",children:(0,Z.jsx)(m.Z,{children:(0,Z.jsx)(r.Z,{id:"PinSaveButton",children:(0,Z.jsx)(g,{clientTrackingParams:n,isCloseupPin:!0,onClickCallback:B,onMount:q,pinKey:{type:"Legacy",data:T},renderPinSaveTooltip:X,saveToBoardFromPostDownloadUpsell:D,setSaveToBoardFromPostDownloadUpsell:Q,showRepinOnInitialRender:C})})})})}},373950:function(e,n,o){o.d(n,{Z:()=>a});function a(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/SaveAffordance-c49c667aebb65cba.mjs.map