(self.modernJsonp=self.modernJsonp||[]).push([["26110"],{351222:function(e,t,n){n.d(t,{Pw:()=>i,SB:()=>r,ZP:()=>o,x9:()=>a});let i=80,r=55,a=e=>"phone"===e?r:i;function o(e,t){return t?0:a(e)}},473304:function(e,t,n){n.d(t,{Z:()=>f});var i=n(281098),r=n(667294),a=n(20256),o=n(937805),s=n(667835),l=n(461951),d=n(816358),u=n(516114),c=n(15667),p=n(883379),m=n(785893);function f({children:e,footerConfig:t,headerConfig:n,height:f,hideOnScroll:g,hideOnScrollState:{isHidden:h,updateHiddenState:E},isFooterHidden:_,noPadding:y,paddingX:A,paddingY:S=u.og,type:T,zIndex:v,isStoryPin:w}){let I,b;(0,r.useEffect)(()=>{(0,i.Z)("FixedContent","/app/packages/layout/FixedContent.tsx")},[]);let{headerLimitedOverflow:R,ignoreObstructions:C,zIndexForGestaltBug:O}=n||{},{appUpsellFooterConfig:N,footerInLego:P,navFooterConfig:L}=t||{},M=!!N,Z="header"===T?"top":"bottom",x=(0,s.vs)(),{isRTL:B}=(0,c.B)(),{mWebCloseupRedesignEnabled:D}=(0,o.Z)(),H=(0,r.useRef)(null),k=(0,r.useRef)(null);(0,r.useEffect)(()=>{try{if(!C){let e=H.current;k.current=R&&e&&Array.isArray(e.children)?e.children[0]:e,k.current instanceof HTMLElement&&d.Z.addObstruction(Z,k.current)}}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}return()=>{!C&&k.current instanceof HTMLElement&&d.Z.removeObstruction(Z,k.current)}},[C,R,Z,x]);let U="top"===Z?"relative":"fixed",$=y?0:S,G=(f??u.R$)+(n?.overrideTop||0),F=g||L?{transition:P||D?"transform 300ms ease-in-out, opacity 300ms ease-in-out":"transform 200ms linear",...h||_?{transform:`translateY(${"top"===Z?-G:G}px)`,opacity:P||D?0:1}:Object.freeze({})}:{},j=2*!("relative"!==U||n?.noGutter),z=j?-j:0,V=x?s.k7:"rgba(255,255,255,.95)";x&&("header"===T?I=-1:b=-1);let Y=P?M?void 0:f??u.R$:"100%",q=P?u.KJ:void 0,W=n?.isTranslucent&&V||x?V:l.Wmm,J=n?.isTransparentBackground&&l.Wyp?l.Wyp:W,K=(0,r.useMemo)(()=>({height:"footer"===T&&D?`calc(${Y} + env(safe-area-inset-bottom))`:Y,...D&&"footer"===T?{paddingBottom:`calc(env(safe-area-inset-bottom) + ${4*($||0)}px)`}:Object.freeze({})}),[D,Y,T,$]),X=(0,p.Z)({skipExpActivation:!0});return(0,m.jsx)(a.xu,{ref:H,bottom:"footer"===T,dangerouslySetInlineStyle:{__style:{top:I,bottomStyle:b,...!v||O?{zIndex:O||1}:Object.freeze({}),...R?{background:"transparent",overflow:"hidden",paddingBottom:u.UB,marginBottom:-u.UB,pointerEvents:"none"}:Object.freeze({}),...n?.hasBorder?{borderBottom:u.dS}:Object.freeze({}),...t?.hasTopShadow?{boxShadow:"0 -2px 4px 1px rgba(0, 0, 0, 0.08)"}:Object.freeze({}),...F}},"data-test-id":T,display:M?"flex":void 0,height:f&&!P?f:void 0,left:!0,marginEnd:P?"auto":z,marginStart:P?"auto":z,onTransitionEnd:()=>{(g||L)&&k.current&&(h||_?d.Z.removeObstruction(Z,k.current):d.Z.addObstruction(Z,k.current))},position:U,right:!0,top:"header"===T,width:P||"fixed"!==U?void 0:"100%",zIndex:O?void 0:v,children:(0,m.jsx)(a.xu,{alignItems:t?.alignCenter?"center":void 0,dangerouslySetInlineStyle:{__style:{backgroundColor:J,paddingLeft:B||!X||w?void 0:"8px",paddingRight:B&&X&&!w?"8px":void 0,...K,boxShadow:D&&"footer"===T?`0 10px 0 0 ${J}, ${u.KJ}`:q,marginBottom:P&&!L?.docked?16:void 0,...R?{pointerEvents:"auto"}:Object.freeze({}),...n?.useRoundedCorners?{zIndex:5,borderTopRightRadius:17,borderTopLeftRadius:17,borderBottomRightRadius:0,borderBottomLeftRadius:0}:Object.freeze({})}},display:P||t?.alignCenter?"flex":void 0,marginEnd:P?"auto":void 0,marginStart:P?"auto":void 0,paddingX:A||4*("footer"===T&&!y)+j,paddingY:$,position:"relative",rounding:P&&!L?.docked?"pill":void 0,width:L?L.footerWidth:M?void 0:"100%",children:"function"==typeof e?e({updateHiddenState:E}):e})})}},588367:function(e,t,n){n.r(t),n.d(t,{default:()=>u});var i=n(281098),r=n(667294),a=n(20256),o=n(516114),s=n(473304),l=n(211887),d=n(785893);function u({hasBorder:e,headerLimitedOverflow:t,ignoreObstructions:n,isTranslucent:u,isTransparentBackground:c,noGutter:p,overrideTop:m,useRoundedCorners:f,zIndexForGestaltBug:g,isStoryPin:h,...E}){(0,r.useEffect)(()=>{(0,i.Z)("FixedHeader","/app/packages/layout/FixedHeader.tsx")},[]);let{noPadding:_,paddingY:y=o.og,zIndex:A}=E;return(0,d.jsx)(a.Le,{height:t?o.LV+2*(_?0:y)*4:void 0,top:m||0,zIndex:A||void 0,children:(0,d.jsx)(l.Z,{hideOnScroll:E.hideOnScroll,children:i=>(0,d.jsx)(s.Z,{...E,headerConfig:{isTranslucent:u,isTransparentBackground:c,headerLimitedOverflow:t,hasBorder:e,ignoreObstructions:n,noGutter:p,overrideTop:m,zIndexForGestaltBug:g,useRoundedCorners:f},hideOnScrollState:i,isStoryPin:h,type:"header"})})})}},211887:function(e,t,n){n.d(t,{Z:()=>o});var i=n(667294),r=n(159527);function a(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o extends i.Component{constructor(...e){super(...e),a(this,"state",{isHidden:!!this.props.appUpsellFooterConfig||!!this.props.navFooterConfig?.isDockedNavOnPlp}),a(this,"lastScrollPos",0),a(this,"updateHiddenState",e=>{this.reqAnimationId=window.requestAnimationFrame(()=>{this.setState({isHidden:e})})}),a(this,"handleScroll",(0,r.Z)(()=>{let{appUpsellFooterConfig:e,navFooterConfig:t}=this.props,{isHidden:n}=this.state,i=window.scrollY,r=i-this.lastScrollPos,a="none",{scrollHeight:o,clientHeight:s}=document.documentElement||{};Number.isNaN(o)||Number.isNaN(s)||(a=r<0?i<=Math.abs((window.scrollMinY||0)+Math.max(r,20))?"start":"none":i>=(window.scrollMaxY||o-s)-Math.max(r,20)?"end":"none");let l=55*!t?.isModal;e?r>20&&n&&i>=500?e.shouldShowAfterScroll()&&(this.updateHiddenState(!1),t?.onScroll(!1)):(r<-20&&!n||i<=l)&&(this.updateHiddenState(!0),t?.onScroll(!0)):this.props.navFooterConfig?.isDockedNavOnPlp?"start"===a&&!n||i<=l?(this.updateHiddenState(!0),t?.onScroll(!0)):(i>l||"end"===a)&&n&&(this.updateHiddenState(!1),t?.onScroll(!1)):(r<-20||"start"===a)&&n||i<=l?(this.updateHiddenState(!1),t?.onScroll(!1)):(r>20||"end"===a)&&!n&&(this.updateHiddenState(!0),t?.onScroll(!0)),this.lastScrollPos=i},30))}componentDidMount(){try{(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.addEventListener("scroll",this.handleScroll)}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}}componentWillUnmount(){(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.removeEventListener("scroll",this.handleScroll),this.reqAnimationId&&(window.cancelAnimationFrame(this.reqAnimationId),this.reqAnimationId=null)}componentDidUpdate(e){!e.hideOnScroll&&this.props.hideOnScroll||!e.navFooterConfig?.isDockedNavOnPlp&&this.props.navFooterConfig?.isDockedNavOnPlp?(this.updateHiddenState(!0),window.addEventListener("scroll",this.handleScroll)):(e.hideOnScroll&&!this.props.hideOnScroll||e.navFooterConfig?.isDockedNavOnPlp&&!this.props.navFooterConfig?.isDockedNavOnPlp)&&(this.updateHiddenState(!1),window.removeEventListener("scroll",this.handleScroll))}render(){let{children:e,navFooterConfig:t}=this.props,{isHidden:n}=this.state;return e({isHidden:!t?.forceShow&&n,updateHiddenState:this.updateHiddenState})}}},55543:function(e,t,n){n.d(t,{Z:()=>r});var i=n(603316);function r(e,t){return new Promise((n,r)=>{if(document.querySelector(`script[src="${e}"]`)){let e=0;if("FACEBOOK"===t)if(window.FB)n();else{let t=setInterval(()=>{window.FB||20===e?(clearInterval(t),n()):(e+=1,(0,i.nP)(`mweb.loadScript.facebook.tries_${e}`,{sampleRate:.01}))},100)}else if("GSI"===t)if(window.google)n();else{let t=setInterval(()=>{window.google||20===e?(clearInterval(t),n()):(e+=1,(0,i.nP)(`mweb.loadScript.gsi.tries_${e}`,{sampleRate:.01}))},100)}else n()}else{let t=document.createElement("script");t.src=e,t.async=!0,t.addEventListener("load",()=>n()),t.addEventListener("error",r),document.getElementsByTagName("head")[0].appendChild(t)}})}},453179:function(e,t,n){n.d(t,{Mt:()=>A,NK:()=>h,P6:()=>a,UE:()=>T,ZE:()=>f,Zt:()=>g,_J:()=>d,_S:()=>E,cL:()=>p,iR:()=>_,jL:()=>l,oN:()=>r,oU:()=>S,rM:()=>m,sV:()=>u,sY:()=>c,yp:()=>o});var i=n(239728);let r=5e3,a=5e3/i.gJ,o="Pin page",s=["Uploaded by user"],l=(e,t)=>!!t&&!e,d=e=>!!e&&5!==e,u=e=>["email","messages","deep_linking"].includes(e),c=e=>!!e&&"gif"===e,p=({embedSrc:e,embedSubtype:t,embedType:n})=>!!e&&!c(n)&&"pinstory"!==t,m=({link:e,mobileLink:t,trackedLink:n,utmLink:i})=>!t&&!i&&!n&&!e,f=e=>/pin.it/gim.test(e||""),g=({link:e,mobileLink:t,origImageUrl:n,trackedLink:i,utmLink:r})=>t||r||i||e||n||"",h=(e,t)=>({deeplinkUri:{android:`pin/${e}/repin`,iOS:`repin/${e}`},mwebUri:{pathname:`/pin/${e}/repin/`,state:{trackingParams:t.state?t.state.trackingParams:""}}});function E(e){for(let t of s)if(e===t)return!1;return!0}function _(e){if(!e)return!1;let{id:t,videos:n}=e;if(t&&n?.id&&n.video_list){let{V_720P:e,V_HLSV4:t,V_HLSV3_MOBILE:i}=n.video_list;if(e&&y(e)||t&&y(t)||i&&y(i))return!0}let i=e.story_pin_data?.pages?.[0]?.blocks;if(i){for(let e of i)if("story_pin_video_block"===e.type&&e?.video)return!0}return!1}function y(e){return!!(e.thumbnail&&e.url&&e.width&&e.height)}function A(e){return e?/(?:v\/|V\/|be\/|(?:\?|&)v=|embed\/|shorts\/)([\w-]+)/.exec(e)?.[1]??null:null}function S({isVideo:e,link:t}){return!!e&&!!t&&!!/(youtu(|.)be)/.exec(t)&&!!A(t)}let T=e=>"button"in e&&1===e.button},622481:function(e,t,n){n.d(t,{Z:()=>i});let i=(0,n(667294).createContext)(null)},282803:function(e,t,n){n.d(t,{Z:()=>i});let i=(0,n(667294).createContext)(null)},255957:function(e,t,n){n.d(t,{Z:()=>L});var i=n(281098),r=n(667294),a=n(286036),o=n(457636),s=n(592109),l=n(901360),d=n(392824),u=n(67831),c=n(703393),p=n(735201),m=n(868178),f=n(891631),g=n(594885),h=n(579358),E=n(970773),_=n(361423),y=n(15667),A=n(112114),S=n(603316),T=n(785893);let v=["initial_app_load","client_route_push"],w=(0,s.XV)("PwtSurface"),I="NavigationComplete",b="VisuallyComplete",R=()=>{(0,p._T)()},C=e=>{if(e.metricConfig.constraints.every(t=>e.constraintMap[t])){let n=Math.max(...e.metricConfig.constraints.map(t=>e.constraintMap[t])),{metricConfig:{metricId:i,pwtStaticContext:r,annotateExperiments:a},annotations:s,binaryAnnotations:u,constraintMap:m,startTime:f,imageTimings:g,spans:E,traceId:_}=e;(0,d.L8)(`Report_PWT_Complete_${(0,o.KJ)(i)}`,f,n);let y=(0,c.W)({annotateExperiments:[...a??[]],annotations:s,binaryAnnotations:u,constraintMap:m,endTime:n,imageTimings:g,metricId:i,pwtStaticContext:r,startTime:f,traceId:_,spans:E});try{var t=String(y.binaryAnnotationMap["metricId.surface"].value);let e=performance.getEntriesByType("resource").filter(e=>e.name.includes("i.pinimg")).reduce((e,t)=>{let n=t.name.replace(".jpg","").split("/");return{[n[n.length-1]]:{downloadSize:t.name.split("/")[3].split("x")[0]},...e}},{});[...Array.from(document.getElementsByTagName("img")).map(t=>{let n=t.src.replace(".jpg","").split("/"),i=n[n.length-1];if(e[i]){let n=(0,h.rZ)(t)?.width||1,r=e[i].downloadSize;return{fileName:i,renderedSize:n,downloadedSize:r,ratio:r/n}}return{fileName:i,renderedSize:1,downloadedSize:1,ratio:1}}),...Array.from(document.querySelectorAll('div[role="img"]')).map(t=>{let n=t.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),i=n[n.length-1];if(e[i]&&t instanceof HTMLDivElement){let n=(0,h.rZ)(t)?.width||1,r=e[i].downloadSize;return{fileName:i,renderedSize:n,downloadedSize:r,ratio:r/n}}return{fileName:i,renderedSize:1,downloadedSize:1,ratio:1}})].forEach(e=>{let{ratio:n,fileName:i,downloadedSize:r}=e;e.ratio>1.05&&(0,l.A9)(`checkImageRatio.${t}`,{count:Math.round(10*n)/10,tags:{fileName:`${r}_${i}`}})})}catch(e){(0,l.H)("image_ratio_check_error",{error:e})}return(0,p._T)(),{...e,result:y,status:"DONE"}}return w(`Remaining constraints: ${e.metricConfig.constraints.filter(t=>!e.constraintMap[t]).join(", ")}`),e},O=(e,t)=>{let{constraint:n,time:i}=t,r=(0,o.KJ)(e.metricConfig.metricId);return _.Z?e.metricConfig.constraints.find(e=>e===n)?e.constraintMap[n]?(w(`constraint "${n}" is already complete.`),(0,l.H)("duplicated_constraint_complete",{constraint:n,action:r}),e):(w(`marking constraint "${n}" as complete ${i||performance.now()}`),i?(0,d.ZP)(`constraint_${n}_is_complete`,i):(0,d.ZP)(`constraint_${n}_is_complete`),C({...e,constraintMap:{...e.constraintMap,[n]:i||_.Z.now()}})):(w(`marked constraint "${n}" is not a required constraint.`),e):((0,l.H)("missing_window_performance",{action:r}),e)},N=(e,t)=>{if(w("dispatch action",t),"INIT_ROUTE"===t.type)return((e,t)=>{let{metricConfig:n,startTime:i,isSampled:r,disablePWTLogging:a}=t;if(a||"TIMING"!==e.status||i===e.startTime||R(),!n)return{status:"DISABLED",metricConfig:null};let s=(0,o.KJ)(n.metricId);if("TIMING"===e.status&&e.startTime===i&&e.constraintMap[I])return(0,l.H)("duplicated_init_route_action",{action:s}),e;if(!a){let e=(0,A.H)();(0,l.A9)(`handler.${s}`,{tags:{handler:e}});let t=void 0!==n.metricId.isAuthenticated&&{tags:{isAuth:n.metricId.isAuthenticated}}||void 0;"Other"===n.pwtStaticContext.browserName&&!1===n.metricId.isAuthenticated&&"initial_app_load"===n.metricId.navigationType?((0,l.A9)(`TIMING.${s}`,{tags:{userAgent:window?.navigator?.userAgent}}),(0,l.A9)(`TIMING.sampled.${s}`,{tags:{userAgent:window?.navigator?.userAgent},sampleRate:.03})):((0,l.A9)(`TIMING.${s}`),(0,l.A9)(`TIMING.sampled.${s}`,{sampleRate:.03})),(0,m.C)({resultLog:`TIMING.${s}`,annotateExperiments:n.annotateExperiments||[],getExperimentGroup:n.pwtStaticContext.getExperimentGroup,options:t})}return O({traceId:(0,p.vc)()||(0,p.ZP)("initial_app_load"===n.metricId.navigationType,n.pwtStaticContext.serverData?.trace_id),status:"TIMING",metricConfig:n,startTime:i,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:r,spans:[]},{constraint:I,disablePWTLogging:a})})(e,t.payload);if("TIMING"!==e.status)return w(`ignoring action due to invalid state ${e.status}`,t),e;switch(t.type){case"ABORT":R();let n={type:"ABORT",reason:t.reason};return{...e,status:"DONE",result:n};case"ANNOTATE":let{name:i}=t.payload;if(!_.Z)return e;let r=_.Z.now();return w(`adding annotation {${i}: ${r}}`),{...e,annotations:{...e.annotations,...{[i]:r}}};case"BINARY_ANNOTATE":let{name:a,value:s,annotationType:d}=t.payload;return w(`adding binary annotation {${a}: ${s}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,...{[a]:{value:s,type:d}}}};case"MARK_CONSTRAINT_COMPLETE":return O(e,t.payload);case"REMOVE_CONSTRAINT":return((e,t)=>{if(!_.Z){let t=(0,o.KJ)(e.metricConfig.metricId);(0,l.H)("missing_window_performance",{action:t})}w(`removing constraint "${t}"`);let n=e.metricConfig.constraints.filter(e=>e!==t),{[t]:i,...r}=e.constraintMap;return C({...e,constraintMap:r,metricConfig:{...e.metricConfig,constraints:n}})})(e,t.payload);case"SET_SEGMENT":var u=t.payload;if(!_.Z){let t=(0,o.KJ)(e.metricConfig.metricId);(0,l.H)("missing_window_performance",{action:t})}w(`updating pwt segment to "${u}"`);let c={...e.metricConfig.metricId,segment:u};return{...e,metricConfig:{...e.metricConfig,metricId:c}};case"SET_VISUALLY_COMPLETE_RESULT":{let{payload:{imageTimings:n}}=t;if(0===n.length)return R(),{...e,status:"DONE",result:{type:"ABORT",reason:"visuallyComplete_noImages"}};let i=Math.max(...n.map(e=>e.responseEnd||0));return O({...e,imageTimings:n},{constraint:b,time:i})}case"ADD_SUBSPAN":let{startTime:f}=e,{payload:{name:g,startTime:h,endTime:y,annotations:S,binaryAnnotations:T,parentId:v}}=t;return{...e,spans:[...e.spans,{name:g,id:(0,E.Z)(),startTime:h||f,endTime:y,annotationMap:{...S},binaryAnnotationMap:{...T},parentId:v}]};case"START_SUBSPAN":return{...e,spans:[...e.spans,{name:t.payload.name,id:(0,E.Z)(),startTime:_.Z?_.Z.now():0,endTime:1/0,annotationMap:{...t.payload.annotations},binaryAnnotationMap:{...t.payload.binaryAnnotations},parentId:t.payload.parentId}]};case"STOP_SUBSPAN":let N=e.spans.findIndex(e=>e.name===t.payload.name);return N>-1?(e.spans[N].endTime=_.Z?_.Z.now():0,t.payload.annotations&&(e.spans[N].annotationMap={...e.spans[N].annotationMap,...t.payload.annotations}),t.payload.binaryAnnotations&&(e.spans[N].binaryAnnotationMap={...e.spans[N].binaryAnnotationMap,...t.payload.binaryAnnotations})):(0,l.H)("invalid_subspan_stop_name",{name:t.payload.name}),e;default:let P=(0,o.KJ)(e.metricConfig.metricId);return(0,l.H)("invalid_pwt_surface_action",{action:P}),e}},P=new Set;function L({children:e,...t}){(0,r.useEffect)(()=>{(0,i.Z)("PwtSurface","/app/packages/pwt-logger/PwtSurface.tsx")},[]);let n=(0,f.Z)(),s=(e=>{if(!e)return"initial_app_load";switch(e.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}})(n),d=t.measureGridVisuallyComplete?["web_masonry_v2"]:[],c=[...t.annotateExperiments??[],...d],{context:p}=(({surface:e,constraints:t,segment:n,measureGridVisuallyComplete:i,annotateExperiments:o,customEnabledNavigationTypes:s,navigationInfo:{clientNavigation:l,navigationType:d},sampleRate:u})=>{let c=(0,r.useRef)("NOT_SET"),p=(0,g.Z)(),{getState:m,dispatch:f}=((e,t)=>{let n=(0,r.useRef)(t);return{getState:()=>n.current,dispatch:t=>{n.current=e(n.current,t)}}})(N,{status:"DISABLED",metricConfig:null}),h=(0,y.B)();if(c.current!==l&&(c.current=l,p)){let{isAuthenticated:r}=p,a=e&&d&&(s||v).includes(d)?{metricId:{type:"surface",surface:e,navigationType:d,isAuthenticated:r,segment:n},annotateExperiments:o,constraints:[I,...t||[],...i?[b]:[]],pwtStaticContext:p}:null;(0,S.nP)("webapp.pwt_surface.init_route",{tags:{surface:e,navigationType:d,isAuthenticated:r}});let c=!P.has(l);f({type:"INIT_ROUTE",payload:{metricConfig:a,startTime:l?l.time:0,isSampled:!u||Math.random()<u,disablePWTLogging:!c}}),c&&P.add(l)}let E=m();if((0,r.useEffect)(()=>()=>{P.delete(l)},[l]),(0,r.useEffect)(()=>{let e=e=>{f({type:"ABORT",reason:e})};a.Z.onSessionPause(e);let t=window.innerHeight,n=window.innerWidth,i=()=>{let e=Math.abs(window.innerHeight-t),r=Math.abs(window.innerWidth-n),a=window.innerHeight!==t,o=window.innerWidth!==n,s={handler:(0,A.H)(),deviceType:p?.deviceType??"unknown",isAuthenticated:p?.isAuthenticated??"unknown",platform:h.userAgent.platform??"unknown"};if((0,S.nP)("webapp.PwtLogger.handleResize",{sampleRate:1,tags:{...s,heightChanged:a,widthChanged:o}}),a&&(0,S.S0)("webapp.PwtLogger.resizeHeightDelta",e,{sampleRate:1,tags:s}),o&&(0,S.S0)("webapp.PwtLogger.resizeWidthDelta",r,{sampleRate:1,tags:s}),window.removeEventListener("resize",i),p?.deviceType==="phone"&&(!o&&a&&e<=150||!a&&!o)||p?.deviceType==="desktop"&&!a&&!o)return void(0,S.nP)("webapp.PwtLogger.skipResizeAbort",{sampleRate:1,tags:{...s,heightChanged:a,widthChanged:o}});f({type:"ABORT",reason:"windowResized"})};return window.addEventListener("resize",i),()=>{let t=m();w("handling unmount",t),"TIMING"===t.status&&R(),a.Z.removePauseListener(e),window.removeEventListener("resize",i)}},[]),"TIMING"!==E.status||!E.constraintMap[I])return{state:E,context:null};let{startTime:T,metricConfig:C}=E;return{state:E,context:{abort:e=>f({type:"ABORT",reason:e}),addAnnotation:e=>f({type:"ANNOTATE",payload:{name:e}}),addBinaryAnnotation:(e,t,n)=>f({type:"BINARY_ANNOTATE",payload:{name:e,value:t,annotationType:n}}),addSubspan:(e,t,n,i={},r={},a=null)=>f({type:"ADD_SUBSPAN",payload:{name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:r,parentId:a}}),getId:()=>T,getMetricId:()=>C.metricId,markConstraintComplete:e=>f({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:e,time:_.Z?_.Z.now():0}}),removeConstraint:e=>f({type:"REMOVE_CONSTRAINT",payload:e}),setSegment:e=>f({type:"SET_SEGMENT",payload:e}),setVisuallyCompleteResult:C.constraints.includes(b)?e=>f({type:"SET_VISUALLY_COMPLETE_RESULT",payload:e}):null,startSubspan:(e,t={},n={},i=null)=>f({type:"START_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:n,parentId:i}}),stopSubspan:(e,t={},n={},i=null)=>f({type:"STOP_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:n,parentId:i}})}}})({...t,annotateExperiments:c,navigationInfo:{navigationType:s,clientNavigation:n}}),m=(0,u.A)(),h=!!m;return(0,r.useEffect)(()=>{if(h){let e=m?.getMetricId(),t=e?(0,o.KJ)(e):null;(0,l.H)("nested_pwt_surface",{action:t})}},[h]),(0,T.jsx)(u.S,{value:p,children:e})}},67831:function(e,t,n){n.d(t,{A:()=>r,S:()=>i});let{Provider:i,getMaybe:r}=(0,n(729434).Z)("pwtSurfaceContext")},891631:function(e,t,n){n.d(t,{Z:()=>a});var i=n(667294),r=n(622481);function a(){return(0,i.useContext)(r.Z)}},594885:function(e,t,n){n.d(t,{Z:()=>a});var i=n(667294),r=n(282803);function a(){return(0,i.useContext)(r.Z)}},324307:function(e,t,n){n.d(t,{ZP:()=>r,mP:()=>i});let i="…";function r(e,t=80,n=i,a=!1){let o;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||a)o=e.substring(0,t);else{let n=e.lastIndexOf(" ",t);o=e.substring(0,n)}return(o=o.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+n}},576087:function(e,t,n){n.d(t,{Z:()=>r});var i=n(869273);let r=({url:e})=>{let t=(0,i.Z)("/");return 0===e.lastIndexOf(t,0)?e.substr(t.length-1):e}},239728:function(e,t,n){n.d(t,{$f:()=>r,Cy:()=>l,DR:()=>i,Fm:()=>s,bR:()=>o,gJ:()=>a,lG:()=>d});let i=1,r=2,a=1e3,o=1e3,s=1e3,l=Object.freeze({DEFAULT:0,LOAD_START:1,LOADED_METADATA:2,LOADED_DATA:3,PLAYING:4,PAUSED:5,SEEKING:6,STALLING:7,FAILED:8,ENDED:9}),d=Object.freeze({MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4})},821651:function(e,t,n){n.d(t,{r:()=>E,W:()=>h});var i=n(667294),r=n(729434),a=n(821342),o=n(886981),s=n(295317),l=n(121836),d=n(238589),u=n(974705);let c=e=>{let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&("object"!=typeof e[n]||null===e[n]||Array.isArray(e[n])?t[(0,u.Z)(n)]=e[n]:t[(0,u.Z)(n)]=c(e[n]));return t},p={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},m=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}};var f=n(785893);let{Provider:g,getMaybe:h}=(0,r.Z)("RoleBasedAccessControlContext"),E=({children:e})=>{let t=(0,a.Z)(),n=!!(t.isAuth&&t.isPartner),{state:r,actions:u,receiveProfiles:h}=(e=>{let[t,n]=(0,i.useReducer)(m,p),r=(({dispatch:e,isEnabled:t,state:n})=>{let{orbacVisibility:r,disableProfileChanger:a,headerVisible:o}=n,s=(0,i.useCallback)(n=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:n})},[t,e]);return{changeProfile:s,toggleORBACVisibility:(0,i.useCallback)(n=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:n??!r})},[t,e,r]),toggleDisableProfileChanger:(0,i.useCallback)(n=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:n??!a})},[t,e,a]),toggleHeaderVisibility:(0,i.useCallback)(n=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:n??!o})},[t,e,o])}})({dispatch:n,isEnabled:e,state:t}),{activeProfile:a,orbacVisibility:o}=t;return(0,i.useEffect)(()=>{let e=(0,d.Nl)().getItem(l.Zo)||!1;e&&n({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,i.useEffect)(()=>{let e=(0,d.Nl)().getItem(l.ig)||!1;e&&n({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,i.useEffect)(()=>{(0,d.Nl)().setItem(l.ig,o)},[o]),(0,i.useEffect)(()=>{(0,d.Nl)().setItem(l.Zo,a)},[a]),{state:t,actions:r,receiveProfiles:(0,i.useCallback)((e,t)=>{n({type:"LOAD_PROFILES",payload:((e,t)=>{let n=[];for(let i in e)i!==t&&n.push({id:i,...c(e[i])});let i=n.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),r=new Map;for(let e of i)r.set(e.id,e);return r})(e,t)})},[n])}})(n),{activeProfile:E,headerVisible:_,profiles:y}=r,A=(0,i.useMemo)(()=>y?Array.from(y.values()):[],[y]),S=(0,s.Z)(A),T=!!t.isAuth&&A.length>0&&S,v=t.isAuth?t.id:"",w=t.isAuth?t.username:"",{changeProfile:I,toggleORBACVisibility:b,toggleDisableProfileChanger:R,toggleHeaderVisibility:C}=u;(0,i.useEffect)(()=>{if(n){if("string"==typeof S)return void I(S);E||I(v)}},[S,v,n,I,E]),(0,i.useEffect)(()=>{n&&(T&&!_&&C(!0),!T&&_&&C(!1))},[C,T,n,_,y]);let{data:O}=(0,o.Z)(n?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),N=O?.profiles,P=(0,i.useMemo)(()=>t&&t.isAuth&&E===t.id?{id:t.id,permissions:["OWNER"],user:{username:w,businessName:t.fullName,imgUrl:t.imageSmallUrl}}:E&&y?y.get(E):void 0,[E,y,t,w]);(0,i.useEffect)(()=>{N&&h(N,v)},[h,N,v]);let L=(0,i.useMemo)(()=>({profiles:A,headerVisible:_,activeProfile:P,changeProfile:I,toggleORBACVisibility:b,toggleDisableProfileChanger:R,toggleHeaderVisibility:C}),[A,_,P,I,b,R,C]);return(0,f.jsx)(g,{value:L,children:e})}},448505:function(e,t,n){n.d(t,{Z:()=>l});var i=n(667294),r=n(675973),a=n(821651),o=n(295317);let s=Object.freeze({}),l=()=>{let{checkExperiment:e}=(0,r.Z)(),t=(0,a.W)(),{activeProfile:n}=t||{},l=(0,o.Z)(t?.profiles||[]),{anyEnabled:d}=e("useorbacroutematcher_in_useorbacactingas");return(0,i.useMemo)(()=>d&&!l?s:n&&(n.viewerMeetsMfaRequirement||(n.permissions||[]).includes("OWNER"))?n:s,[d,l,n])}},295317:function(e,t,n){n.d(t,{Z:()=>l});var i=n(616550),r=n(825332),a=n(821342),o=n(506662),s=n(169053);let l=e=>{let t=(0,r.TH)(),n=(0,a.Z)(),l=(0,s.S6)(),d=(0,i.$B)("/:username"),u=d?.params?.username,c=(0,i.$B)("/pin/:id"),p=!!c?.params?.id&&l(c.params.id)?.pinner?.id;if((0,o.ej)(t))return!1;if((0,o.RU)(t)||(0,o.mY)(t))return!0;let m=[...e,...n.isAuth?[{user:{username:n.username},id:n.id}]:[]].find(e=>{if(!e)return!1;let{user:t,id:n}=e;return(!!t&&"username"in t&&!!t.username&&!!u||!!p&&!!n)&&(t.username===u||p===n)});return!!m&&m.id}},7872:function(e,t,n){n.d(t,{D3:()=>c,DX:()=>d,Fk:()=>i,KY:()=>p,Ms:()=>r,N1:()=>m,_P:()=>l,gJ:()=>a,lJ:()=>s,nl:()=>o,q6:()=>u});let i=(e,t)=>{let n=e&&e.isAuth?e.fullName:"";return e&&t&&t.user&&t.user.businessName&&(n=t.user.businessName),n},r=(e,t)=>{let n=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(n=t.user.username),n},a=(e,t)=>{let n=e&&e.isAuth?e.imageMediumUrl:"";return e&&t&&t.user&&t.user.imgUrl&&(n=t.user.imgUrl),n},o=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),s=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",l=(e,t,n)=>n&&n.user&&t&&t.isAuth&&n.id!==t.id?n.user.merchantId:e.advertiser?.merchant_id,d=(e,t,n)=>n&&n.user&&e.isAuth&&n.id!==e.id?n.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,u=(e,t,n)=>!!(e&&e.isAuth&&n&&n.id&&n.id!==e.id&&n.id===t),c=(e,t,n)=>!!(u(e,t,n)||e&&e.isAuth&&t===e.id),p=(e,t,n)=>c(e,t&&t.owner&&t.owner.id||"",n);function m(e,t,n){return c(e,t?t.id:"",n)}},271597:function(e,t,n){n.d(t,{AC:()=>o,FC:()=>u,FP:()=>l,M0:()=>s,SA:()=>p,Xq:()=>c,Y_:()=>a,o2:()=>r,s0:()=>i,z9:()=>d});let i=44,r=40,a=49,o=69,s=236,l=157,d=320,u=213,c=7,p=["US","GB","CA","FR","DE","AT","CH","IT","ES","AU","BR","NL","MX"]},907586:function(e,t,n){n.d(t,{_9:()=>a,o6:()=>i,tg:()=>r});let i=20,r=24,a=20},80245:function(e,t,n){n.d(t,{By:()=>u,IT:()=>d,N6:()=>r,br:()=>a,jq:()=>s,lU:()=>l,tq:()=>o});var i=n(686319);let r=(e,t)=>({type:"UPDATE_CURRENT_SEARCH",payload:{query:e,scope:t}}),a=(e,t)=>({type:"UPDATE_RECENT_SEARCHES",payload:{query:e,scope:t}}),o=e=>({type:"UPDATE_RECENT_SEARCHES_BATCH",payload:{data:e}}),s=(e,t,n)=>({type:"UPDATE_TYPEAHEAD_CACHE",payload:{items:e,term:t,recent_queries_tags:n}}),l=(e,t,n)=>r=>{(0,i.Z)({url:"/v3/search/recent/",method:"DELETE",data:{vertical:e}}).then(t,n),r("PERSONAL"===e?{type:"CLEAR_RECENT_PERSONAL_SEARCHES"}:{type:"CLEAR_RECENT_SEARCHES"})},d=(e,t,n,r,a)=>o=>{n||(0,i.Z)({url:"/v3/search/recent/",method:"DELETE",data:{query:e,vertical:t}}).then(r,a),o("PERSONAL"===t?{type:"CLEAR_RECENT_PERSONAL_SEARCH",payload:{query:e}}:{type:"CLEAR_RECENT_SEARCH",payload:{query:e}})},u=e=>t=>{t({type:"RELOAD_VISUAL_SEARCH_ANNOTATIONS",payload:{pinId:e}})}},404005:function(e,t,n){n.d(t,{Z:()=>g});var i=n(281098),r=n(667294),a=n(20256),o=n(121836),s=n(588367),l=n(15667),d=n(238589),u=n(351222),c=n(647709),p=n(785893);let m=new a.Ry(1),f=new a.H3([m]);function g({children:e,hideOnScroll:t=!1,fixedHeaderRefHeight:n,paddingY:a=0,hasBorder:m=!1,isTransparentBackground:g=!1}){(0,r.useEffect)(()=>{(0,i.Z)("SearchFixedHeader","/app/www/search/SearchFixedHeader.tsx")},[]);let h=(0,c.ZP)(),{isAuthenticated:E}=(0,l.B)(),_="true"===d.ZP.getItem(o.m5);return(0,p.jsx)(s.default,{hasBorder:m,height:t?n:void 0,hideOnScroll:t,isTransparentBackground:g,overrideTop:"tablet"===h||_?0:(0,u.ZP)(h,E),paddingY:a,zIndex:f,children:e})}},339618:function(e,t,n){n.d(t,{Z:()=>i});function i({appliedFilters:e,article:t,autoCorrectionDisabled:n,filters:i,journeyDepth:r,query:a,scope:o,selectedOneBarModules:s,sourceId:l,sourceModuleId:d,topPinIds:u}){let c=[o,a,i,e,t,l,d,r,u].map(e=>e??"").join(":");return n&&(c+=":auto-correction-disabled"),s&&(c+=`:${s}`),c}},100785:function(e,t,n){n.d(t,{V:()=>a,q:()=>o});var i=n(378888),r=n(339618);let a=e=>{let{category:t,domains:n,price_max:r,price_min:a}=(0,i.mB)(e);return[t,n,r,a].map(e=>e??"").join("-")},o=(e,t)=>(0,r.Z)({appliedFilters:a(e),article:(0,i.mB)(e).b_id??"",autoCorrectionDisabled:(0,i.mB)(e).auto_correction_disabled??"",filters:(0,i.mB)(e).filters??"",journeyDepth:(0,i.mB)(e).journey_depth??"",query:(0,i.mB)(e).q??"",scope:t,selectedOneBarModules:(0,i.mB)(e).selected_one_bar_modules,sourceId:(0,i.mB)(e).source_id??"",sourceModuleId:(0,i.mB)(e).source_module_id??"",topPinIds:(0,i.mB)(e).top_pin_ids??""})},438235:function(e,t,n){n.d(t,{Z:()=>o});var i=n(616550),r=n(825332),a=n(675973);function o(){return((0,a.Z)().checkExperiment("web_react_router_v6").anyEnabled?r.UO:i.UO)()}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/26110-6e9bd841f3fe2d78.mjs.map